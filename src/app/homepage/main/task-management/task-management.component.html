<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Task Management</h4>
    <button class="btn btn-primary" [routerLink]="['/taskManagement/addtask']">Create New Task</button>
  </div>

  <div class="card">
    <div class="card-body">
      <!-- Sort Dropdowns -->
      <div class="d-flex mb-3">
        <select class="form-select me-2" (change)="sortTasksBy('dueDate', $event)">
          <option value="">Sort by Due Date</option>
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>
        <select class="form-select me-2" (change)="sortTasksBy('priority', $event)">
          <option value="">Sort by Priority</option>
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
        <select class="form-select" (change)="sortTasksBy('status', $event)">
          <option value="">Sort by Status</option>
          <option value="Not Started">Not Started</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>

      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead class="table-light">
            <tr>
              <th>S.no</th>
              <th>Client Name</th>
              <th>Task Title</th>
              <th>Description</th>
              <th>Due Date</th>
              <th>Priority</th>
              <th>Status</th>
              <th>Assigned To</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of sortedTasks; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ task.clientName }}</td>
              <td>{{ task.taskTitle }}</td>
              <td>{{ task.description }}</td>
              <td>{{ task.dueDate | date:'yyyy-MM-dd' }}</td>
              <td>{{ task.priority }}</td>
              <td>{{ task.status }}</td>
              <td>{{ task.assignedTo }}</td>
              <td>
                <button class="btn btn-outline-secondary btn-sm" (click)="onViewTaskClicked(task)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm" (click)="OnEditTaskClicked(task)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-outline-danger btn-sm" (click)="deleteTask(task.id, i)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
