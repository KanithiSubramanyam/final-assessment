<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4>Task Management</h4>
    <button class="btn btn-primary" [routerLink]="['/taskManagement/addtask']">Create New Task</button>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead class="table-light">
            <tr>
              <th>S.no</th>
              <th>Client Name</th>
              <th>Task Title</th>
              <th>Description</th>
              <th>
                Due Date
                <i (click)="sortTasksBy('dueDate', 'asc')" class="fas fa-arrow-up" [ngClass]="{
                  'text-primary': sortField === 'dueDate' && sortDirection === 'asc'
                }"></i>
                <i (click)="sortTasksBy('dueDate', 'desc')" class="fas fa-arrow-down" [ngClass]="{
                  'text-primary': sortField === 'dueDate' && sortDirection === 'desc'
                }"></i>
              </th>
              <th>
                Priority
                <i (click)="sortTasksBy('priority', 'asc')" class="fas fa-arrow-up" [ngClass]="{
                  'text-primary': sortField === 'priority' && sortDirection === 'asc'
                }"></i>
                <i (click)="sortTasksBy('priority', 'desc')" class="fas fa-arrow-down" [ngClass]="{
                  'text-primary': sortField === 'priority' && sortDirection === 'desc'
                }"></i>
              </th>
              <th>
                Status
                <i (click)="sortTasksBy('status', 'asc')" class="fas fa-arrow-up" [ngClass]="{
                  'text-primary': sortField === 'status' && sortDirection === 'asc'
                }"></i>
                <i (click)="sortTasksBy('status', 'desc')" class="fas fa-arrow-down" [ngClass]="{
                  'text-primary': sortField === 'status' && sortDirection === 'desc'
                }"></i>
              </th>
              
              <th>Assigned To</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let task of sortedTasks; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ task.clientName }}</td>
              <td>{{ task.taskTitle }}</td>
              <td>{{ task.description }}</td>
              <td>{{ task.dueDate | date:'yyyy-MM-dd' }}</td>
              <td>{{ task.priority }}</td>
              <td>{{ task.status }}</td>
              <td>{{ task.assignedTo }}</td>
              <td>
                <button class="btn btn-outline-secondary btn-sm" (click)="onViewTaskClicked(task)">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-outline-secondary btn-sm" (click)="OnEditTaskClicked(task)">
                  <i class="fas fa-edit"></i>
                </button>
                <button class="btn btn-outline-danger btn-sm" (click)="deleteTask(task.id, i)">
                  <i class="fas fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
